---
layout: post
title: "前后端项目部署实例"
date: 2025-08-30 14:14:59 +0800
categories: blog update
---
## 项目部署环境

|机器名|IP|Port|作用|
|---|---|---|---|
|Frontend1|192.168.211.150|80|部署前端项目|
|Backend1|192.168.211.152|8080|部署后端项目|
|MySQL1|192.168.211.138|3306|部署MySQL数据库|
|Redis1|192.168.211.154|6379|部署Redis缓存数据库|

## 部署图

![deploy](/assets/images/250830-deploy.png)

## 部署顺序

数据层服务器 -> 后端服务 -> 前端服务

## 部署MySQL

`scp source target`上传需要的文件。

`mysql -u root -p`登录用户。

`mysql> source file.sql`载入数据库文件。

`firewall-cmd --permanent --add-port 3306/tcp`开放数据库端口。

## 部署Redis数据库

编辑redis配置文件`vim /etc/redis.conf`

61行（允许任意IP访问）

`bind 127.0.0.1`改为`bind 0.0.0.0`（配置redis服务可以被任意IP访问, 0.0.0.0代表任意）

80行（允许远程连接）

`protected-mode yes`改为`protected-mode no`（关闭redis保护模式，否则会拒绝远程连接)

`firewall-cmd --permanent --add-port=6379/tcp`开放端口。

## 部署后端服务器

`scp`上传打包好的jar包。

`nohup java -jar project.jar > project.out 2>&1 &`在后台运行并且输出日志到project.out和stderr到stdout。

`firewall-cmd --permanent --add-port=8080/tcp`开放端口。

## 部署前端服务器

用前端项目替换掉`/usr/share/nginx/`的html目录，编辑`/etc/nginx/conf.d/default.conf`。

![Nginx](/assets/images/250830-nginx.png)

`firewall-cmd --permanent --add-port=8080/tcp`开放防火墙。
